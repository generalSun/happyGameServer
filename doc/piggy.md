# 全局
- 1.交互协议，除开登录开始的几个特殊场合用文本交互协议外，其余均采用2bytes+protobuf
- 2.直面客户端的只有gaeway和login。
- 3.服务器内部消息通讯，服务器内部采用lua消息？客户端的protobuf在gaeway解码后直接call hall或者game，还是直接转发这个probobuf，支持直接转发吗？
- 4.数据，包含两部分数据，一部分是永久性数据，如玩家账号信息，玩家金币、各个游戏数据，这部分需要及时存储到mysql，
    另外一部分就是房间内的数据，这部分需要支持断线重连，放入redis，不必存入数据库，如果宕机掉了就掉了。
- 5.游戏内部如何表示用户+gateway+tcp连接，并以此来进行(msgserver？)？game或者hall需要有一个具体的玩家对象，玩家登录时记录。

# 网关服务器 （gateway，拟采用skynet的gateserver，或者msgserver?）
- 1.和客户端直连，作为客户端的登陆点，由登录服负载选择gateway给客户端
- 2.负责包转发、协议加解密等
- 3.管理大量客户端连接

# 登录服 (login)
- 1.注册（需要支持游客账户）
- 2.绑定（将一个游客账号绑定到一个特定的账号，可以是自定义用户名密码，也可以根据第三方的token生成用户名密码）
- 3.登录（沿用skynet的loginserver，这里要做真实用户名密码的验证，加在token里即可）

# 大厅服务器 (hall)
- 1.具体游戏管理，考虑每个game启动时向大厅报告自己的游戏信息，比如游戏类型、房间编号。
- 2.游戏房间管理，房间可用游戏id+游戏房间号组成全局唯一id
- 3.玩家游戏数据管理，登录时拉取到，进入game时到大厅询问，game及时同步到大厅，大厅定时保存到mysql。
- 4.gm命令支持（有可能需要后台改玩家的某些概率之类的内容）

# 游戏服务器（game）
- 1.负责具体游戏逻辑
- 2.向大厅及时同步每个房间的信息，可能直接存到redis，大厅拉即可
- 3.某些游戏数据记录，考虑直接存mysql（可能需要记录每一局游戏各个玩家的输赢啊等等作为历史记录，以供查询分析）

# TODO
- 1.具体协议梳理文档，以便客户端沟通
- 2.登录和gateway完善